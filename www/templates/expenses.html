<ion-view expenses-directive>
  <ion-content scroll="false">
  	
  	<div class="main-wrapper">

      <div ng-if="show_main">
    	  <div class="expenses-wrapper main-expenses-wrapper">
          <h5 ng-click="toggleSummaryDatePicker()"  class="text-center text-weight-700">
            <span class="sum-date" ng-bind="summary_month_selected">December 2017</span>
            <i class="fa fa-calendar" style="margin-left: 5px"></i>
          </h5>
          <div class="white-space-30"></div>
    	  	<canvas id="pie" class="chart chart-pie"
      		  chart-data="expensesChartData" chart-labels="expensesChartLabels" chart-options="expensesChartOptions">
      		</canvas>
          <div class="white-space-50"></div>

          <div ng-if="isStatsShown" class="summary-wrapper">
            <p><label>Income : </label>$ <span ng-if="!isEditIncomeShown" ng-bind="statistics.income">1000.00</span>
              <a ng-if="!isEditIncomeShown" href="javascript:void(0)" ng-click="toggleEditIncome()"><i class="fa fa-pencil color-black-555" style="margin-left: 5px;"></i></a>
              
              <label ng-if="isEditIncomeShown" class="item item-input income-input">
                <input type="text" name="" ng-model="statistics.income">
              </label>
              <button ng-if="isEditIncomeShown" ng-click="toggleEditIncome()" class="button btn-income">Done</button>
            </p>
            <p><label>Expenses : </label>$ <span ng-bind="statistics.expenses">700.00</span></p>
            <p><label>Savings : </label>$ <span ng-bind="statistics.savings">300.00</span></p>
          </div>
        </div>

        <ul class="list expenses-list" >
          <li class="item" ng-click="toggleAddExpenses()">
            <i class="fa fa-plus"></i> Add Expenses
          </li>
          <li class="item" ng-click="toggleListView()">
            <i class="fa fa-file-text-o"></i> List
          </li>
          <li class="item" ng-click="toggleSettings()">
            <i class="fa fa-cog"></i> Settings
          </li>
        </ul>
      </div>

      <div ng-if="show_add_expenses">
        <div class="add-expenses-wrapper">
          <div class="white-space-10"></div>
          <div class="list list-inset">
            <label class="item item-input">
              <input type="text" placeholder="Date" ng-model="expenses_form.date" ng-click="toggleSummaryDatePicker()">
              <i class="icon ion-calendar placeholder-icon" style="padding-right: 10px;"></i>
            </label>
          </div>

          <div style="position: relative;">
            <div class="list list-inset">
              <label class="item item-input">
                <input type="text" placeholder="Category" ng-model="expenses_form.category_name" ng-click="toggleCatOptExpForm()">
                <i class="icon fa fa-caret-down placeholder-icon" style="padding-right: 13px;"></i>
              </label>
            </div>
            <div ng-if="showDropCat" class="list-categoryies" >
              <p ng-repeat="cat in category_list" ng-click="setSelectedCategory(cat)" class="item" ng-bind="cat.category_name"></p>
            </div>
          </div>

          <div class="list list-inset">
            <label class="item item-input">
              <input type="text" placeholder="Description" ng-model="expenses_form.desc">
            </label>
          </div>
          <div class="list list-inset">
            <label class="item item-input">
              <input id="inputExpensesValue" type="text" numbers-only placeholder="Value" ng-model="expenses_form.value">
            </label>
          </div>

          <div class="white-space-20"></div>
          <p ng-if="add_success" class="text-success text-center text-weight-700"><i class="fa fa-check color-green"></i> Successfully added</p>
          <p ng-if="add_error" class="text-error text-center text-weight-700"><i class="fa fa-times color-red"></i> Something went wrong</p>
          <button ng-disabled="!expenses_form.date || !expenses_form.category_name || !expenses_form.category_name || !expenses_form.desc || !expenses_form.value" class="button btn-add-expenses" ng-click="submitExpenses(expenses_form)">SUBMIT</button>
          <button class="button btn-cancel " ng-click="toggleAddExpenses()">CANCEL</button>
          
        </div>
      </div>

      <div ng-if="show_list">
        <div class="expenses-wrapper">
          <h5 class="text-center text-weight-700">
            <span ng-bind="exp_list_month_selected">December 2017</span>
            <i ng-click="toggleSummaryDatePicker()" class="fa fa-calendar" style="margin-left: 5px"></i>
          </h5>
          <div class="white-space-20"></div>

          <div ng-hide="!week.show" class="week-wrapper" ng-repeat="week in weekRange">
            <p ng-click="toggleWeekDates(week)" class="week-border-bottom">
              Week {{$index+1}}
              <span ng-if="!week.showDates"><i class="fa fa-caret-down"></i></span>
              <span ng-if="week.showDates"><i class="fa fa-caret-up"></i></span>
              <span class="pull-right font-16 text-weight-700">$ <span ng-bind="week.weekly_total">100</span></span>
            </p>

            <div ng-if="week.showDates" class="list-container">
              <div class="white-space-10"></div>
              <div ng-repeat="date in week.days" class="date-wrapper">
                <p ng-click="toggleListItems( date )" class="" ng-class="{ 'date-border-bottom' : !date.showList }">
                  <label class="font-14 text-weight-700" ng-bind="date.date"></label> 
                  <a href="javascript:void(0)" >
                    <i ng-if="!date.showList" class="fa fa-caret-down color-black-555"></i>
                    <i ng-if="date.showList" class="fa fa-caret-up color-black-555"></i>
                  </a>
                  <span class="pull-right font-14 text-weight-700">$ <span ng-bind="date.daily_total">100</span></span>
                </p>
                <ul ng-if="date.showList" class="list-expenses list">
                  <li class="item" ng-repeat="exp in date.expenses" ng-click="toggleExpenses(exp)">
                    <span class="font-12" ng-bind="exp.description"></span> 
                    <span class="pull-right font-11 text-weight-700">$ <span ng-bind="exp.value"></span></span>
                  </li>
                  <div class="white-space-10"></div>
                </ul>
              </div>
              <div class="white-space-10"></div>
            </div>
          </div>

          <div class="white-space-30"></div>
          <p class="font-20 text-weight-700">Monthly Total : <span class="pull-right">$ <span ng-bind="monthly_total">100</span></span></p> 
          <div class="white-space-30"></div>
          <button class="button btn-settings-save" ng-click="toggleListView( )">DONE</button>
          
        </div>
      </div>

      <div ng-if="show_settings">
        <div class="expenses-wrapper">
          <div class="statistics-wrapper">
            <ul class="list">
              <li class="font-18 text-weight-700" ng-click="toggleStatistics()">
                Show Statistics <i ng-if="isStatsShown" class="fa fa-check color-green pull-right"></i>
              </li>
            </ul>
          </div>

          <div class="white-space-20"></div>

          <div class="categories-wrapper">
            <h5 class="text-weight-700">Categories 
              <span class="pull-right">
                <a href="javascript:void(0)" ng-click="toggleCatOpt()"><i class="fa fa-cog color-black-555" style="margin-right: 5px"></i></a>
              </span>
            </h5>

            <ul class="list" >
              <li ng-repeat="cat in category_list" class="item cat-item" ng-class="{'delete_active': delCategoryShow && cat.active, 'update_active': editCategoryShow && cat.active}" ng-click="toggleCategory( cat )">
                <span ng-bind="cat.category_name"></span> 
                  <i ng-if="cat.show && !delCategoryShow && !editCategoryShow && !isCategoryOptShow" class="fa fa-check color-green pull-right"></i>
                  <i ng-if="delCategoryShow" class="fa fa-times color-red pull-right"></i>
                  <i ng-if="editCategoryShow" class="fa fa-pencil color-gray pull-right"></i>
                </span>
              </li>
            </ul>

            <div ng-if="addCategoryShow" class="add-cat-container">
              <div class="white-space-20"></div>
              <div class="list">
                <label class="item item-input">
                  <input id="category_input" type="text" placeholder="Category Name" ng-model="category_info.name" autofocus>
                </label>
              </div>

              <button class="button btn-submit-category" ng-click="addCategories(category_info.name)" ng-disabled="!category_info.name || category_info.name == null">Add</button>
            </div>

            <div ng-if="editCategoryShow && update_category_selected.length > 0" class="add-cat-container">
              <div class="white-space-20"></div>
              <div class="list">
                <label class="item item-input">
                  <input id="category_input2" type="text" placeholder="New Category Name" ng-model="category_info.name" autofocus>
                </label>
              </div>

              <button class="button btn-submit-category" ng-click="updateCategoriesName(category_info.name)" ng-disabled="category_selected.length == 0 || !category_info.name || category_info.name == null">Update</button>
            </div> 

          </div>
          
          <div class="white-space-50"></div>
          <button ng-if="!isCategoryOptShow" class="button btn-settings-save" ng-click="toggleSettings()">DONE</button>
          <button ng-if="delCategoryShow" class="button btn-settings-save" ng-click="deleteAllSelected()" ng-disabled="category_selected.length == 0">Delete</button>
          
        </div>
      </div>

      <div ng-if="isCategoryOptShow" class="bottom-category-tabs">
        <div class="opt-tab" ng-click="toggleAddCategory()">
          <i class="fa fa-plus"></i>
          <p>Add</p>
        </div>
        <div class="opt-tab" ng-click="toggleEditCategory()">
          <i class="fa fa-pencil"></i>
          <p>Edit</p>
        </div>
        <div class="opt-tab" ng-click="toggleDeleteCategory()">
          <i class="fa fa-minus"></i>
          <p>Del</p>
        </div>
      </div>

      <div ng-if="isExpensesListOptShow" class="bottom-category-tabs">
        <div class="opt-tab" ng-click="toggleEditExpenses()">
          <i class="fa fa-pencil"></i>
          <p>Edit</p>
        </div>
        <div class="opt-tab" ng-click="DeleteExpenses()">
          <i class="fa fa-minus"></i>
          <p>Del</p>
        </div>
      </div>

  	</div>

  </ion-content>
</ion-view> 